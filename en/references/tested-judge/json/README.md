---
title: TESTed JSON-testplans
description: "TESTed JSON-testplans"
sidebarDepth: 2
---

::: warning Warning
The JSON-testplans are only for advanced users of TESTed.
The [DSL-testplans](../dsl) are recommended to be used whenever this is possible.
:::

# TESTed JSON-testplans
The JSON-testplan supports all possible configuration options and evaluations that are supported by TESTed.
The complete JSON-schema for these testplans could be found
<a href="/tested-json-testplan-schema.json" target="_blank">here</a>.

The purpose of this documentation is to give an overview of all parameters that in the JSON-testplan could be set.
Therefore we will also use partial JSON-schemes.

Examples of the JSON-testplans and evaluators could be found at the
[GitHub repository](https://github.com/dodona-edu/universal-judge/tree/master/exercise) of TESTed.

## The toplevel object
This object has two attributes: `namespace` and `tabs:
- **namespace**: The `namespace` is the namespace is the name of the submission solution file (`<namespace>.<ext>`).
  The `namespace` is also the namespace of the code.
  The default namespace is `submission`.
  :::tip Hint
  The namespace is best notated in `snake_case`,
  which enables to use the right style convention foreach programming language.
  :::
- **tabs**: The `tabs` object is a list of all [tabs](#tab) that must be executed.

```json
"Plan": {
  "title": "Plan",
  "type": "object",
  "properties": {
    "tabs": {
      "title": "Tabs",
      "type": "array",
      "items": {
        "$ref": "#/definitions/Tab"
      }
    },
    "namespace": {
      "title": "Namespace",
      "type": "string"
    }
  }
}
```

## Tab
Tabs in the testplan correspond with the visualisation at Dodona.
A tab contains a list of runs that must be executed.

A tab has 3 attributes: `name`, `hidden` en `runs`.
- **name**: This is the name of tab, as presented at Dodona.
- **hidden**: This is a boolean that indicates if tab may be hidden, if all testcases succeeded.
- **runs**: This is a list of all [runs](#run) (generated executables) that must be executed.

```json
"Tab": {
  "title": "Tab",
  "type": "object",
  "properties": {
    "name": {
      "title": "Name",
      "type": "string"
    },
    "runs": {
      "title": "Runs",
      "type": "array",
      "items": {
        "$ref": "#/definitions/Run"
      }
    },
    "hidden": {
      "title": "Hidden",
      "type": "boolean"
    }
  },
  "required": [
    "name",
    "runs"
  ]
},
```

## Run
A run is a generated executable,
that will contain a collections of contexts and also a testcase that evaluates the written program.

A run has two attributes: `run` and `contexts`.
- **run**: This is the testcase that executes the written program (see [The Run](#the-run)).
- **contexts**: This is a list of all [contexts](#context) that must be executed.

```json
"Run": {
  "title": "Run",
  "type": "object",
  "properties": {
    "run": {
      "title": "Run",
      "allOf": [
        {
          "$ref": "#/definitions/RunTestcase"
        }
      ]
    },
    "contexts": {
      "title": "Contexts",
      "type": "array",
      "items": {
        "$ref": "#/definitions/Context"
      }
    }
  }
},
```

## The Run
The *Run* is a testcase that executes the written program.
This will be visualised as a separate context at Dodona.

The *Run* has 4 attributes: `input`, `output`, `description` en `link_files`.
- **input**: The [input data](#runinput) voor the program.
- **output**: The [expected output](#runoutput) for the program and evaluators.
- **description**: The description to display at Dodona.
  When the `description` isn't given, it will be generated by TESTed.
- **link_files**: The list of files that must be linked in the feedback (See [FileUrl](#fileurl)).

```json
"RunTestcase": {
  "title": "RunTestcase",
  "type": "object",
  "properties": {
    "input": {
      "title": "Input",
      "allOf": [
        {
          "$ref": "#/definitions/RunInput"
        }
      ]
    },
    "output": {
      "title": "Output",
      "allOf": [
        {
          "$ref": "#/definitions/RunOutput"
        }
      ]
    },
    "description": {
      "title": "Description",
      "type": "string"
    },
    "link_files": {
      "title": "Link Files",
      "type": "array",
      "items": {
        "$ref": "#/definitions/FileUrl"
      }
    }
  }
},
```

### RunInput
The *RunInput*-object contains all information the run the program test.

The *RunInput*-object has 3 attributes: `stdin`, `arguments` and `main_call`.
- **stdin**: The given input at standard input.
  This could either be the empty channel ([EmptyChannel](#emptychannel)),
  or [TextData](#textdata) which contains a file location or string.
- **arguments**: The list of program arguments, these must be strings.
- **main_call**: This a boolean that indicates if the program test must be executed.
  Default will the program test not be executed.
  
```json
"RunInput": {
  "title": "RunInput",
  "type": "object",
  "properties": {
    "stdin": {
      "title": "Stdin",
      "anyOf": [
        {
          "$ref": "#/definitions/TextData"
        },
        {
          "$ref": "#/definitions/EmptyChannel"
        }
      ]
    },
    "arguments": {
      "title": "Arguments",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "main_call": {
      "title": "Main Call",
      "type": "boolean"
    }
  }
},
```

### RunOutput
The *RunOutput*-object contains all information that is needed to evaluate the *program* output.

The *RunOutput*-object has 5 attributes: `stdout`, `stderr`, `file`, `exception`, `exit_code`.
- **stdout** and **stderr**: The output channel for standard output and error.
  The possible output channels are:
  - [EmptyChannel](#emptychannel): No output is expected on this channel.
    This is the default option.
  - [IgnoreChannel](#ignorechannel): No output is expected on this channel, but given output is ignored.
  - [TextOutputChannel](#textoutputchannel): Some output is expected on this channel.
- **file**: The output channel for a file.
  The possible output channels are:
  - [IgnoreChannel](#ignorechannel): No output is expected on this channel, but given output is ignored.
    This is the default option.
  - [FileOutputChannel](#fileoutputchannel): A file is expected as output.
    
  ::: warning Remark
  At this moment TESTed only supports one expected file for one program test.
  :::
  ::: warning Remark
  At this moment TESTed can't check if no files are generated by the program.
  :::
- **exception**: The outputchannel for an exception.
  The possible output channels are:
  - [EmptyChannel](#emptychannel): No exception is expected.
    This is the default option.
  - [IgnoreChannel](#ignorechannel): No exception is expected, but a thrown exception is ignored.
  - [ExceptionOutputChannel](#exceptionoutputchannel): An exception is expected to be thrown.
- **exit_code**: The outputchannel for the exit code of the program.
  The exit code must be passed in the object [ExitCodeOutputChannel](#exitcodeoutputchannel).
  Default is `0` expected as exit code.
  
```json
"RunOutput": {
  "title": "RunOutput",
  "type": "object",
  "properties": {
    "stdout": {
      "title": "Stdout",
      "anyOf": [
        {
          "$ref": "#/definitions/TextOutputChannel"
        },
        {
          "$ref": "#/definitions/EmptyChannel"
        },
        {
          "$ref": "#/definitions/IgnoredChannel"
        }
      ]
    },
    "stderr": {
      "title": "Stderr",
      "anyOf": [
        {
          "$ref": "#/definitions/TextOutputChannel"
        },
        {
          "$ref": "#/definitions/EmptyChannel"
        },
        {
          "$ref": "#/definitions/IgnoredChannel"
        }
      ]
    },
    "file": {
      "title": "File",
      "anyOf": [
        {
          "$ref": "#/definitions/FileOutputChannel"
        },
        {
          "$ref": "#/definitions/IgnoredChannel"
        }
      ]
    },
    "exception": {
      "title": "Exception",
      "anyOf": [
        {
          "$ref": "#/definitions/ExceptionOutputChannel"
        },
        {
          "$ref": "#/definitions/EmptyChannel"
        },
        {
          "$ref": "#/definitions/IgnoredChannel"
        }
      ]
    },
    "exit_code": {
      "title": "Exit Code",
      "allOf": [
        {
          "$ref": "#/definitions/ExitCodeOutputChannel"
        }
      ]
    }
  }
},
```

## Context
A context is a list of testcases that must be executed.
Next to the testcases, could a context contains preparing and exiting code that are programming language depended.

A context has 5 attributes: `testcases`, `before`, `after`, `description` en `link_files`.
- **testcases**: The list of [testcases](#testcase) that must be evaluated.
- **before** and **after**: An object whereby the keys are the programming languages,
  hereby are the preparing and/or exiting code passed as [TextData](#textdata) objects.
- **description**: The description to display at Dodona.
- **link_files**: The list of files that must be linked in the feedback (See [FileUrl](#fileurl)).

```json
"Context": {
  "title": "Context",
  "type": "object",
  "properties": {
    "testcases": {
      "title": "Testcases",
      "type": "array",
      "items": {
        "$ref": "#/definitions/Testcase"
      }
    },
    "before": {
      "title": "Before",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/TextData"
      }
    },
    "after": {
      "title": "After",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/TextData"
      }
    },
    "description": {
      "title": "Description",
      "type": "string"
    },
    "link_files": {
      "title": "Link Files",
      "type": "array",
      "items": {
        "$ref": "#/definitions/FileUrl"
      }
    }
  }
},
```

## Testcase
A testcase is an assignment or expression that must be evaluated.

A testcase has 3 attributes: `input`, `description` and `output`.
- **input**: The input statement or expression, see [Statements and expressions](#statements-and-expressions).
- **description**: The description to be displayed at Dodona.
  When the `description` isn't given, it will be generated by TESTed.
- **output**: The [Output](#output) object contains all output channels for the testcase.

```json
"Testcase": {
  "title": "Testcase",
  "type": "object",
  "properties": {
    "input": {
      "title": "Input",
      "anyOf": [
        {
          "$ref": "#/definitions/Assignment"
        },
        {
          "type": "string"
        },
        {
          "$ref": "#/definitions/FunctionCall"
        },
        {
          "$ref": "#/definitions/NumberType"
        },
        {
          "$ref": "#/definitions/StringType"
        },
        {
          "$ref": "#/definitions/BooleanType"
        },
        {
          "$ref": "#/definitions/SequenceType"
        },
        {
          "$ref": "#/definitions/ObjectType"
        },
        {
          "$ref": "#/definitions/NothingType"
        }
      ]
    },
    "description": {
      "title": "Description",
      "type": "string"
    },
    "output": {
      "title": "Output",
      "allOf": [
        {
          "$ref": "#/definitions/Output"
        }
      ]
    }
  },
  "required": [
    "input"
  ]
},
```

### Output
The *Output*-object contains all information that is needed to evaluate the testcase.

The *Output*-object has 5 attributes: `stdout`, `stderr`, `file`, `exception`, `exit_code`.
- **stdout** and **stderr**: The output channel for standard output and error.
  The possible output channels are:
  - [EmptyChannel](#emptychannel): No output is expected on this channel.
    This is the default option.
  - [IgnoreChannel](#ignorechannel): No output is expected on this channel, but given output is ignored.
  - [TextOutputChannel](#textoutputchannel): Some output is expected on this channel.
- **file**: The output channel for a file.
  The possible output channels are:
  - [IgnoreChannel](#ignorechannel): No output is expected on this channel, but given output is ignored.
    This is the default option.
  - [FileOutputChannel](#fileoutputchannel): A file is expected as output.

  ::: warning Remark
  At this moment TESTed only supports one expected file for one program test.
  :::
  ::: warning Remark
  At this moment TESTed can't check if no files are generated by the program.
  :::
- **exception**: The outputchannel for an exception.
  The possible output channels are:
  - [EmptyChannel](#emptychannel): No exception is expected.
    This is the default option.
  - [IgnoreChannel](#ignorechannel): No exception is expected, but a thrown exception is ignored.
  - [ExceptionOutputChannel](#exceptionoutputchannel): An exception is expected to be thrown.
- **value**: The output channel for the return value of an expression.
  The possible output channel are:
  - [EmptyChannel](#emptychannel): No output is expected on this channel.
    This is the default option.
  - [IgnoreChannel](#ignorechannel): No output is expected on this channel, but given output is ignored.
  - [ValueOutputChannel](#valueoutputchannel): There is a return value expected at this channel.

```json
"Output": {
  "title": "Output",
  "type": "object",
  "properties": {
    "stdout": {
      "title": "Stdout",
      "anyOf": [
        {
          "$ref": "#/definitions/TextOutputChannel"
        },
        {
          "$ref": "#/definitions/EmptyChannel"
        },
        {
          "$ref": "#/definitions/IgnoredChannel"
        }
      ]
    },
    "stderr": {
      "title": "Stderr",
      "anyOf": [
        {
          "$ref": "#/definitions/TextOutputChannel"
        },
        {
          "$ref": "#/definitions/EmptyChannel"
        },
        {
          "$ref": "#/definitions/IgnoredChannel"
        }
      ]
    },
    "file": {
      "title": "File",
      "anyOf": [
        {
          "$ref": "#/definitions/FileOutputChannel"
        },
        {
          "$ref": "#/definitions/IgnoredChannel"
        }
      ]
    },
    "exception": {
      "title": "Exception",
      "anyOf": [
        {
          "$ref": "#/definitions/ExceptionOutputChannel"
        },
        {
          "$ref": "#/definitions/EmptyChannel"
        },
        {
          "$ref": "#/definitions/IgnoredChannel"
        }
      ]
    },
    "result": {
      "title": "Result",
      "anyOf": [
        {
          "$ref": "#/definitions/ValueOutputChannel"
        },
        {
          "$ref": "#/definitions/EmptyChannel"
        },
        {
          "$ref": "#/definitions/IgnoredChannel"
        }
      ]
    }
  }
},
```

## FileUrl
The *FileUrl*-object is used to enable file linking in the feedback.
The content of this object is based in the input expected by the *Python Tutor*.
::: warning Opmerking
However this object looks like the input for the *Python Tutor*,
is TESTed only be able to open the linked files in a new browser tab.
:::

The *FileUrl*-object has 4 attributes: `content`, `name`, `location` and `storage`.
- **content**: The content of the file.
  At this moment limited to an url (mostly a relative url to a file in the `description` folder of the exercise).
- **name**: The name of the file that must be linked.
- **location**: The location type of the content.
  At this moment is only `href` supported, which is also the default value.
- **storage**: The storage method of the content.
  At this moment is only `disk` supported, which is also the default value.
  
```json
"FileUrl": {
  "title": "FileUrl",
  "type": "object",
  "properties": {
    "content": {
      "title": "Content",
      "type": "string"
    },
    "name": {
      "title": "Name",
      "type": "string"
    },
    "location": {
      "title": "Location",
      "type": "string"
    },
    "storage": {
      "title": "Storage",
      "type": "string"
    }
  },
  "required": [
    "content",
    "name"
  ]
},
```

## TextData
The *TextData*-object is the object used for text or text-files as input.

The *TextData*-object has 2 attributes: `data` and `type`.
- **data**: When the type is `text`, this is the text itself.
  Otherwise, this is a path to a file located in the `workdir` folder of the judge.
- **type**: This is type of input: the text itself (`text`) or a text-file (`file`).
  See [TextChannelType](#textchanneltype).
  
```json
"TextData": {
  "title": "TextData",
  "type": "object",
  "properties": {
    "data": {
      "title": "Data",
      "type": "string"
    },
    "type": {
      "allOf": [
        {
          "$ref": "#/definitions/TextChannelType"
        }
      ]
    }
  },
  "required": [
    "data"
  ]
},
```

## Enums
The enums are used the define the type of objects.

### ExceptionBuiltin
The enum for the builtin exception evaluator.
The only excepted value is `exception`.

```json
"ExceptionBuiltin": {
  "title": "ExceptionBuiltin",
  "description": "Built in evaluators for exceptions.",
  "enum": [
    "exception"
  ],
  "type": "string"
},
```

### TextBuiltin
The enum for the builtin text evaluator.
The two possible values are `text` (for textual evaluation) and `file` (for file evaluation).

```json
"TextBuiltin": {
  "title": "TextBuiltin",
  "description": "Textual built in evaluators.",
  "enum": [
    "text",
    "file"
  ],
  "type": "string"
},
```

### TextChannelType
This the enum for textual channels.
TextChannelType has two types: `text` and `file`.

```json
"TextChannelType": {
  "title": "TextChannelType",
  "description": "An enumeration.",
  "enum": [
    "text",
    "file"
  ],
  "type": "string"
},
```

### ValueBuiltin
The enum for the builtin value evaluator.
The only excepted value is `value`.

```json
"ValueBuiltin": {
  "title": "ValueBuiltin",
  "description": "Built in evaluators for values.",
  "enum": [
    "value"
  ],
  "type": "string"
},
```

